[build]
builder = "NIXPACKS"
buildCommand = "cd voice-agent && npm install && npm run build"
watchPatterns = ["voice-agent/**"]

[deploy]
startCommand = "cd voice-agent && node server.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# This runs the unified server which includes:
# - Next.js (web pages like /job/[id] for SMS links)
# - WebSocket server (for voice calls)
# - SMS Wave Worker (for 3-wave notifications)
# All on Railway's assigned PORT

